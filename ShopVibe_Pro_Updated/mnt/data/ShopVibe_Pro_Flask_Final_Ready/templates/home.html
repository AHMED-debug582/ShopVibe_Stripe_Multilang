
<form method="get" action="" style="text-align:right; margin: 1rem;">
  <select name="lang" onchange="this.form.submit()">
    {% for code in ['en', 'es', 'fr', 'de', 'ar'] %}
      <option value="{{ code }}" {% if session.lang == code %}selected{% endif %}>{{ code.upper() }}</option>
    {% endfor %}
  </select>
</form>


{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <!-- شريط البحث -->
  <div class="row mb-4">
    <div class="col-md-12">
      <form method="get" action="/products">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="ابحث عن منتج..." name="q">
          <button class="btn btn-dark" type="submit">{{ t["بحث"] }}</button>
        </div>
      </form>
    </div>
  </div>

  <!-- عروض بانر -->
  <div id="bannerCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
    <div class="carousel-inner rounded">
      <div class="carousel-item active">
        <img src="/static/img/banner1.jpg" class="d-block w-100" alt="عروض 1">
      </div>
      <div class="carousel-item">
        <img src="/static/img/banner2.jpg" class="d-block w-100" alt="عروض 2">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <!-- أقسام -->
  <div class="row text-center mb-4">
    <div class="col-md-3"><a href="/products?category=electronics" class="btn btn-outline-dark w-100">{{ t["إلكترونيات"] }}</a></div>
    <div class="col-md-3"><a href="/products?category=books" class="btn btn-outline-dark w-100">{{ t["كتب"] }}</a></div>
    <div class="col-md-3"><a href="/products?category=fashion" class="btn btn-outline-dark w-100">{{ t["ملابس"] }}</a></div>
    <div class="col-md-3"><a href="/products?category=games" class="btn btn-outline-dark w-100">{{ t["ألعاب"] }}</a></div>
  </div>

  <!-- منتجات -->
  <h4 class="mb-3">{{ t["منتجات مميزة"] }}</h4>
  <div class="row">
    {% for product in featured_products %}
    <div class="col-md-3 mb-4">
      <div class="card h-100 shadow-sm">
        <img src="{{ product.image }}" class="card-img-top" alt="{{ product.name }}">
        <div class="card-body">
          <h6 class="card-title">{{ product.name }}</h6>
          <p class="text-muted mb-1">{{ product.category }}</p>
          <div class="mb-2">
            <span class="text-warning">{{ t["&#9733;"] }}</span>
            <span class="text-warning">{{ t["&#9733;"] }}</span>
            <span class="text-warning">{{ t["&#9733;"] }}</span>
            <span class="text-muted">{{ t["&#9734;"] }}</span>
            <span class="text-muted">{{ t["&#9734;"] }}</span>
          </div>
          <p class="fw-bold">{{ product.price }} درهم</p>
          <a href="/product/{{ product._id }}" class="btn btn-sm btn-outline-dark w-100 mb-2">{{ t["عرض التفاصيل"] }}</a>
          <form action="/add-to-cart/{{ product._id }}" method="post">
            <button class="btn btn-sm btn-dark w-100" type="submit">{{ t["أضف إلى العربة"] }}</button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
